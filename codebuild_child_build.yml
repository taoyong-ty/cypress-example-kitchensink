version: 0.2

env:
  variables:
    CYPRESS_RECORD_KEY: "54f1e172-e3de-4ac9-8273-d149db7b5463"

phases:
  install:
    commands:
    - yarn global add serve
  build:
    commands:
    - npm run start:ci &
    # Cypress use the `ci-build-id` to group machines to run parallel tests
    - npm run e2e:record --record -- --parallel --group electrons --ci-build-id $PARENT_CODEBUILD_BUILD_ID
